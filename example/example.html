<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <!-- Load jQuery and autolink-js -->
    <script>{:src => "https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"}</script>
    <script>{:src => "../autolink.js"}</script>
  </head>
  <body>
    <ul>
      <li>Our first item contains no links.</li>
      <li>Our second item contains a link to Google http://google.com.</li>
      <li class="new_window">Our third item contains a link that opens in a new window http://google.com</li>
      <li>Our fourth item contains a link to Google http://google.com and a shortened bitly http://bit.ly/1337</li>
      <li class="callback">Our fifth item contains a link to image https://www.google.com/images/srpr/logo3w.png</li>
    </ul>
<script>/*<![CDATA[*/$(document).ready(function() {
  $('li:not([class!=""])').each(function() {
    var that = $(this);
    var text = that.html();
    
    that.html(autoLink(text));
  });
  
  var callback = $('li.callback');
  
  $(callback).html(
    autoLink(callback.html(), { callback: function(url){
      return /\.(gif|png|jpe?g)$/i.test(url) ? '<img src="' + url + '">' : null;
    }})
  );
  
  var new_window = $('li.new_window');
  
  $(new_window).html(
    autoLink(new_window.html(), { target: "_blank" })
  );
});/*]]>*/</script>
  </body>
</html>
